<script>
    let addMessage = document.querySelector('.new_task'),
        addButton = document.querySelector('.add'),
        todo = document.querySelector('.todo');

    let toDoList = [];

    if(localStorage.getItem('todo')){
        toDoList = JSON.parse(localStorage.getItem('todo'));
        displayMessages();
    }
    addButton.addEventListener('click', function (){

        let newToDo = {
            todo: addMessage.value,
            checked: false,
            important: false
        };

        toDoList.push(newToDo);
        displayMessages();
        localStorage.setItem('todo', JSON.stringify(toDoList));
    });
    function displayMessages(){
        let displayMessage = '';
        toDoList.forEach(function(item, i){
            displayMessage += `
            <li>
                <input type='checkbox' id='item_${i}' ${item.checked ? 1 : 2}>
                <label for='item_${i}'>${item.todo}</label>
            </li>
            `;

            todo.innerHTML = displayMessages;
        })
    };

</script>
